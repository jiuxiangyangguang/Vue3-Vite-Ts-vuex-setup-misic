import{T as t,d as e,r as o,b6 as n,ab as a,ad as l,c as s,a6 as c,e as i,am as r,b7 as u,ao as d,b as f,a9 as m,b8 as g,a3 as B,an as b,a4 as p,b9 as h,x as C,ba as v,m as w,au as x,ae as y,P as k,bb as S,b0 as T,bc as D,bd as A,aj as H}from"./index-f678d2ce.js";import{B as O}from"./index-df442bcb.js";const[j,z]=t("action-bar"),P=Symbol(j);const E=c(e({name:j,props:{placeholder:Boolean,safeAreaInsetBottom:l},setup(t,{slots:e}){const l=o(),c=n(l,z),{linkChildren:i}=a(P);i();const r=()=>{var o;return s("div",{ref:l,class:[z(),{"van-safe-area-bottom":t.safeAreaInsetBottom}]},[null==(o=e.default)?void 0:o.call(e)])};return()=>t.placeholder?c(r):r()}})),[F,I]=t("action-bar-button");const N=c(e({name:F,props:i({},r,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean}),setup(t,{slots:e}){const o=u(),{parent:n,index:a}=d(P),l=f((()=>{if(n){const t=n.children[a.value-1];return!(t&&"isButton"in t)}})),c=f((()=>{if(n){const t=n.children[a.value+1];return!(t&&"isButton"in t)}}));return m({isButton:!0}),()=>{const{type:n,icon:a,text:i,color:r,loading:u,disabled:d}=t;return s(O,{class:I([n,{last:c.value,first:l.value}]),size:"large",type:n,icon:a,color:r,loading:u,disabled:d,onClick:o},{default:()=>[e.default?e.default():i]})}}})),[K,L,M]=t("dialog"),R=i({},g,{title:String,theme:String,width:B,message:[String,Function],callback:Function,allowHtml:Boolean,className:b,transition:p("van-dialog-bounce"),messageAlign:String,closeOnPopstate:l,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:l,closeOnClickOverlay:Boolean}),U=[...h,"transition","closeOnPopstate"];var q=e({name:K,props:R,emits:["confirm","cancel","keydown","update:show"],setup(t,{emit:e,slots:n}){const a=o(),l=C({confirm:!1,cancel:!1}),c=t=>e("update:show",t),i=e=>{var o;c(!1),null==(o=t.callback)||o.call(t,e)},r=o=>()=>{t.show&&(e(o),t.beforeClose?(l[o]=!0,H(t.beforeClose,{args:[o],done(){i(o),l[o]=!1},canceled(){l[o]=!1}})):i(o))},u=r("cancel"),d=r("confirm"),f=v((o=>{var n,l;if(o.target!==(null==(l=null==(n=a.value)?void 0:n.popupRef)?void 0:l.value))return;({Enter:t.showConfirmButton?d:S,Escape:t.showCancelButton?u:S})[o.key](),e("keydown",o)}),["enter","esc"]),m=()=>{const e=n.title?n.title():t.title;if(e)return s("div",{class:L("header",{isolated:!t.message&&!n.default})},[e])},g=e=>{const{message:o,allowHtml:n,messageAlign:a}=t,l=L("message",{"has-title":e,[a]:a}),c=T(o)?o():o;return n&&"string"==typeof c?s("div",{class:l,innerHTML:c},null):s("div",{class:l},[c])},B=()=>{if(n.default)return s("div",{class:L("content")},[n.default()]);const{title:e,message:o,allowHtml:a}=t;if(o){const t=!(!e&&!n.title);return s("div",{key:a?1:0,class:L("content",{isolated:!t})},[g(t)])}},b=()=>n.footer?n.footer():"round-button"===t.theme?s(E,{class:L("footer")},{default:()=>[t.showCancelButton&&s(N,{type:"warning",text:t.cancelButtonText||M("cancel"),class:L("cancel"),color:t.cancelButtonColor,loading:l.cancel,disabled:t.cancelButtonDisabled,onClick:u},null),t.showConfirmButton&&s(N,{type:"danger",text:t.confirmButtonText||M("confirm"),class:L("confirm"),color:t.confirmButtonColor,loading:l.confirm,disabled:t.confirmButtonDisabled,onClick:d},null)]}):s("div",{class:[A,L("footer")]},[t.showCancelButton&&s(O,{size:"large",text:t.cancelButtonText||M("cancel"),class:L("cancel"),style:{color:t.cancelButtonColor},loading:l.cancel,disabled:t.cancelButtonDisabled,onClick:u},null),t.showConfirmButton&&s(O,{size:"large",text:t.confirmButtonText||M("confirm"),class:[L("confirm"),{[D]:t.showCancelButton}],style:{color:t.confirmButtonColor},loading:l.confirm,disabled:t.confirmButtonDisabled,onClick:d},null)]);return()=>{const{width:e,title:o,theme:n,message:l,className:i}=t;return s(k,w({ref:a,role:"dialog",class:[L([n]),i],style:{width:y(e)},tabindex:0,"aria-labelledby":o||l,onKeydown:f,"onUpdate:show":c},x(t,U)),{default:()=>[m(),B(),b()]})}}});const G=c(q);export{G as D,q as s};
